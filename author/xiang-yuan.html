<!doctype html>
<html lang="en">

<head>

    <title>85后那些年 - Articles by 向远</title>

    <!-- meta -->
    <meta charset="utf-8" />
    <meta name="author" content="向远" />
    <meta name="dc.language" content="en" />
    <meta name="dc.license" content="">

    <!-- favicon -->
    <link rel="icon" href="http://xiangyuan.github.io/theme/favicon.ico" type="image/x-icon">

    <!-- newsfeeds -->
        <link href="http://xiangyuan.github.io/feeds/index.xml" type="application/atom+xml" rel="alternate" title="85后那些年 Full Atom Feed" />
        <link href="http://xiangyuan.github.io/rss/index.xml" type="application/rss+xml" rel="alternate" title="85后那些年 Full RSS Feed" />

    <!-- assets -->
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
   
    <link href="https://fonts.googleapis.com/css?family=Linden+Hill:400,400italic" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Anonymous+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://xiangyuan.github.io/theme/css/simplegrid.css" type="text/css">
    <link rel="stylesheet" href="http://xiangyuan.github.io/theme/css/main.css" type="text/css">
    <link rel="stylesheet" href="http://xiangyuan.github.io/theme/css/pygments.css" type="text/css">
    <!--[if lt IE 8]>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet" type="text/css">
    <![endif]-->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css">

</head>

<body>

   <div class="grid grid-pad">
     <div class="col-1-1">        
       <ul id="mainnav">
          <li><a href="http://xiangyuan.github.io">home</a></li>
       </ul>
       <div id="blogtitle"><a href="http://xiangyuan.github.io">85后那些年</a></div>
       <div id="blogsubtitle"><a href="http://xiangyuan.github.io"></a></div>
     </div>
    </div>

    <div class="grid grid-pad">
       <div id="left-side" class="col-8-12">
          <section id="content" class="hyphenate">

        <article class="entry-overview">
            <div class="date">Mon 03 June 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/06/03/controllerhu-jia-20xiang-su-xia-yi-wen-ti/" rel="bookmark" title="Permalink to controller互加20像素下移问题">
                        controller互加20像素下移问题
                    </a>
                </h2></header>

                   <div class="clearboth"><pre class="literal-block">
CGRect frame = self.view.bounds;
NSLog(&#64;&quot;%f %f %f %f&quot;,frame.origin.x,frame.origin.y,frame.size.width,frame.size.height);
self.view.bounds = [UIScreen mainScreen].bounds;
NSLog(&#64;&quot;%f %f %f %f&quot;,frame.origin.x,frame.origin.y,frame.size.width,frame.size.height);
[self.view addSubview:_tabBarController.view];
</pre>
<div class="line-block">
<div class="line">uitabbarcontroller被添加到另一个controller里面时，会出现一个20高度的空白，也就是</div>
<div class="line-block">
<div class="line">会引起整个视图向底部移动。</div>
<div class="line">需要添加self.view.bounds = [UIScreen mainScreen].bounds; 就可以解决。</div>
<div class="line">原因是两种情况依赖的父对象不同。</div>
</div>
</div>
<p>##
上面在ios7已有问题，不能再使用，可使用其他方式解决。</p>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Wed 01 May 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/05/01/ge-chou-la-jie-mian-cai-dan-shi-xian/" rel="bookmark" title="Permalink to 一个抽拉界面菜单实现">
                        一个抽拉界面菜单实现
                    </a>
                </h2></header>

                   <div class="clearboth"><p>在一个叫作群群的应用中，有一个效果。某一个按钮进行接动（pan）时，就会动态的出来一个菜单。</p>
<p>然后发了一些时间作了一个实现。方案觉得还不怎地好。图片版权归群群应用所有。</p>
<div class="line-block">
<div class="line">实现效果如下图：</div>
</div>
<img alt="" src="images/Screenshot-2013.05.01-15.13.35.png" style="width: 200px; height: 300px;" />
<img alt="" src="images/Screenshot-2013.05.01-15.13.39.png" style="width: 200px; height: 300px;" />
<img alt="" src="images/Screenshot-2013.05.01-15.13.43.png" style="width: 200px; height: 300px;" />
<div class="line-block">
<div class="line">原理是</div>
<div class="line-block">
<div class="line">1、图片处理。</div>
<div class="line">2、pan手势。</div>
<div class="line">3、frame调整。</div>
</div>
</div>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Sat 27 April 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/04/27/iosshang-ke-tuo-dong-de-gun-dong-tiao/" rel="bookmark" title="Permalink to ios上可拖动的滚动条">
                        ios上可拖动的滚动条
                    </a>
                </h2></header>

                   <div class="clearboth"><p>在android平台中listview有一个thumb手机样式的拖动条，可以快速的拖动列表。</p>
<p>在ios上这个却是没有的。</p>
<p>在进行之前先来看一个场景，很多ios应用在看列表时，都会动态加载更多，然后随着列表项越来越多时。再到最上面时滚动就比较的费时，读一些内容软多的文字时也会碰到这种情况。</p>
<p>zaker上面看文章时也会一个快速拖动条，看新闻体验就比较的好。</p>
<p>这个手机样式图下图。</p>
<img alt="" src="images/1AB64F7B-B686-4A71-AAF6-037E80C6C39F.png" style="width: 200px; height: 300px;" />
<p>当然上图中的手指并不是图，是通过代码实现的。上面是table做的测试。下面是一个scrollview结果的图形。</p>
<img alt="" src="images/9271739A-005A-41F3-9C2A-ACA3E189D62E.png" style="width: 200px; height: 300px;" />
<p>一、下面先说说那个手指样式类图实现原理。</p>
<p>手指图是上下都是一个三角形，通过path画一个三角形，然后将图形context反转再画一个三角。</p>
<p>中间部分是一个pattern模式图形.</p>
<p>画三角</p>
<pre class="literal-block">
/**
    *  /\
    ** --
    *  | |
    *  \/
    */
   CGRect bounds = self.bounds;
   CGMutablePathRef pathref = CGPathCreateMutable();
   CGContextSaveGState(ctx);
   CGContextSetLineWidth(ctx, 2);
   CGContextSetFillColorWithColor(ctx, [UIColor grayColor].CGColor);
   CGPathMoveToPoint(pathref, NULL, bounds.origin.x + bounds.size.width / 2, 0.f);
   CGPathAddLineToPoint(pathref, NULL, 0.f, kTriangleHeight);
   CGPathAddLineToPoint(pathref, NULL, bounds.size.width, kTriangleHeight);
   CGPathCloseSubpath(pathref);
   CGContextAddPath(ctx, pathref);
   CGContextDrawPath(ctx, kCGPathFill);
   CGContextRestoreGState(ctx);

   CGContextSaveGState(ctx);
   CGContextTranslateCTM(ctx, 0.f, bounds.size.height);
   CGContextScaleCTM(ctx, 1.f, -1);
   CGContextSetLineWidth(ctx, 2);
   CGContextSetFillColorWithColor(ctx, [UIColor grayColor].CGColor);
   CGContextAddPath(ctx, pathref);
   CGContextDrawPath(ctx, kCGPathFill);
   CGContextRestoreGState(ctx);
   CGPathRelease(pathref);
</pre>
<div class="line-block">
<div class="line">2、模式画图</div>
<div class="line-block">
<div class="line">1.创建pattern</div>
</div>
</div>
<pre class="literal-block">
CGPatternRef CGPatternCreate (
void *info,//传递给画图回调函数的参数
CGRect bounds,//每一个单元格的大小，上图里面就是一个小圆
CGAffineTransform matrix,//变换矩阵
CGFloat xStep,//画完一个格后，x轴偏移
CGFloat yStep,
CGPatternTiling tiling,
bool isColored,
const CGPatternCallbacks *callbacks//画图回调
 );
</pre>
<p>2.完整代码</p>
<pre class="literal-block">
static const CGPatternCallbacks callbacks = { 0, &amp;drawCellCallback, NULL };

    CGPatternRef pattern = CGPatternCreate(0, CGRectMake(0.0, 0.0, 6, 6), CGAffineTransformIdentity, 5, 7, kCGPatternTilingConstantSpacing, true, &amp;callbacks);
    CGContextSetFillPattern(ctx, pattern, α);
    CGPatternRelease(pattern);
    CGContextFillRect(ctx, CGRectMake(2.f, kTriangleHeight + 4, bounds.size.width - 4, bounds.size.height - 2 * kTriangleHeight - 8));
    CGContextRestoreGState(ctx);
</pre>
<p>二、然后就是实现触摸滚动了。</p>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Mon 15 April 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/04/15/uicolorshe-zhi-bei-jing-he-uiimagetu-pian-la-shen/" rel="bookmark" title="Permalink to UIColor设置背景和UIImage图片拉伸">
                        UIColor设置背景和UIImage图片拉伸
                    </a>
                </h2></header>

                   <div class="clearboth"><div class="section" id="uicolor">
<h2><strong>①：UIColor设置背景</strong></h2>
<p>通常我们在设置一个view的背景为一个图片的时候，我们往往在上面加上一个imageview，然后在imageview中添加图片作为背景，</p>
<p>那如果app中要求的背景是一个草坪的图形，是不是我们就必须画一个和手机屏幕一样打的草坪的图片呢，其实没有必要，我们只需要一个小小的草坪的图片，然后让它在背景上面重复平铺就可以了。</p>
<p>首先，准备一个草坪的图片<a class="reference external" href="http://kingiol.com/bl/wp-content/uploads/2013/04/bg.png"><img alt="草坪" src="http://kingiol.com/bl/wp-content/uploads/2013/04/bg.png" /></a></p>
<p>然后我们就用这张图片在来填充这个屏幕的背景</p>
<pre class="literal-block">
UIImage *bgImage = [UIImage imageNamed:&#64;&quot;bg.png&quot;];
self.view.backgroundColor = [UIColor colorWithPatternImage:bgImage];
</pre>
<p>然后运行app，查看屏幕中的背景变化：</p>
<p><a class="reference external" href="http://kingiol.com/bl/wp-content/uploads/2013/04/QQ20130415-3.png"><img alt="image1" src="http://kingiol.com/bl/wp-content/uploads/2013/04/QQ20130415-3-154x300.png" /></a></p>
</div>
<div class="section" id="uiimage">
<h2><strong>②：UIImage图片拉伸</strong></h2>
<pre class="literal-block">
UIImage *imageViewBg = [bgImage resizableImageWithCapInsets:UIEdgeInsetsMake(50, 50, 50, 50)];
</pre>
<p>用此方法可以实现。边框区域不会拉伸，保持原样。</p>
<p><a class="reference external" href="http://kingiol.com/bl/wp-content/uploads/2013/04/imageResize.png"><img alt="image2" src="http://kingiol.com/bl/wp-content/uploads/2013/04/imageResize-300x241.png" /></a></p>
</div>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Tue 09 April 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/04/09/opengles20zhi-er/" rel="bookmark" title="Permalink to opengles20之二">
                        opengles20之二
                    </a>
                </h2></header>

                   <div class="clearboth"><p>关于上一篇写一个demo的，具地代码地址如下。有空再细细描述</p>
<p>我的github地址：<a class="reference external" href="https://github.com/xiangyuan/gles20demo.git">https://github.com/xiangyuan/gles20demo.git</a></p>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Mon 01 April 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/04/01/removing-nslogs-for-distribution/" rel="bookmark" title="Permalink to Removing NSLogs for distribution">
                        Removing NSLogs for distribution
                    </a>
                </h2></header>

                   <div class="clearboth"><div class="line-block">
<div class="line">在开发iOS应用时经常使用NSLog打印信息来调试，但在发布时这些打印信息应该去除,逐个的去注释掉打印语句太过麻烦，可以使用预处理宏在发布app时去掉打印，方法如下:</div>
<div class="line-block">
<div class="line">在每个工程里都有一个-Prefix.pch文件,在此文件中添加如下语句</div>
</div>
</div>
<div class="line-block">
<div class="line">#if DEBUG</div>
<div class="line-block">
<div class="line">#warning NSLogs will be shown</div>
<div class="line">#else</div>
<div class="line">#define NSLog(...) {}</div>
<div class="line">#endif</div>
<div class="line">这样，在开发时会有NSLogs will be</div>
</div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/liyajie1209/coamee.com/myblog/content/removing-nslogs-for-distribution.rst</tt>, line 11)</p>
Line block ends without a blank line.</div>
<p>shown的告警，此时NSLog打印可以正常显示；在发布时NSLog被定义为空语句，不打印任何数据。</p>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Fri 22 March 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/03/22/fen-fan/" rel="bookmark" title="Permalink to 纷繁">
                        纷繁
                    </a>
                </h2></header>

                   <div class="clearboth"><div class="line-block">
<div class="line">突然觉得人的一生非常短暂，而且人与人之间的差距。或是贫穷、或是富有，每个人都有自己要去做的一些事情。然而纷繁复杂的社会使那偶尔清静的一隅渐渐消逝。使得我们放下了好多曾经放在心上的事情也慢慢的被我们遗忘。</div>
<div class="line"><br /></div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/liyajie1209/coamee.com/myblog/content/emotion_feng_fan.rst</tt>, line 8)</p>
Line block ends without a blank line.</div>
<p>身边多了新的朋友、新的牵挂、新的责任，也让我们变得不知所挫。而且我相信人的一生说不定哪天就没有了，有很多的不平，很多的放不下在岁月中慢慢变淡。从而又进入了一个新的起点。
|
做一些没有做的事情就变得必要了，曾经自己觉得以后我们可以改变很多人，帮助很多人。岁月如河，随着时间的向前推移，那些让自己觉得是己任的东西太多被我们放下了。虽然我们不能改变世界，但我们可以改变自己。今天开始想做的事情一定去一件件的做完，就当作是死前的那种必要性的东西去看待。
|
没有人会在意你的不存在，因为或是没有被别人放在心上，或是被时间给冲淡。就像鲁迅一样有多少还记得这个模眉冷对千夫指，俯者甘为孺子牛的他，他就这样被我们给遗忘在历史的长河之中，就做些对他人有意义的事情吧，因为自己能改变的太少了。
|  今天开始好好对待身边的每一个人，there are so many things i can’t to
let you know,because i love you 。
虽然你们不一定在乎我是谁，我要把一些事情给做到吧，因为哪天我会不在的，你们过的好就行。不求闻达于诸侯，但求放在心上。</p>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Fri 22 March 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/03/22/guan-yu-tu-xiang-maskyu-blendshi-xian-zhi/" rel="bookmark" title="Permalink to 关于图象mask与blend实现之一">
                        关于图象mask与blend实现之一
                    </a>
                </h2></header>

                   <div class="clearboth"><div class="line-block">
<div class="line">1、关于使用 CGImageCreateWithMask(&lt;#CGImageRef image#&gt;, &lt;#CGImageRefmask#&gt;)来进行|| 掩码时。</div>
<div class="line-block">
<div class="line">情况一：第二个参数是用CGImageMaskCreate创建生成的 image mask。</div>
<div class="line">那么就会是黑色部分出现，白色部分消失。</div>
</div>
</div>
<pre class="literal-block">
CGImageRef topRef = mask.CGImage;
CGImageRef maskImage = CGImageMaskCreate(CGImageGetWidth(topRef),
CGImageGetHeight(topRef), CGImageGetBitsPerComponent(topRef),
CGImageGetBitsPerPixel(topRef), CGImageGetBytesPerRow(topRef),
CGImageGetDataProvider(topRef), CGImageGetDecode(topRef), false);
// CGImageRef target = CGImageCreateWithMask(origin.CGImage,maskImage);
// UIImage \* image = [UIImage imageWithCGImage:target];

//release
CGImageRelease(maskImage);
</pre>
<div class="line-block">
<div class="line">情况二：第二个参数是用cgimagecreate创建生成的一个image对象时，</div>
<div class="line">那么就会和情况一产生相反的结果。多半可能会不显示.</div>
</div>
<p>注意：外部图片不能直接用来作为mask的图像。</p>
<p>2、色彩来做为Mask</p>
<p>3、context clip来实现Mask</p>
<div class="line-block">
<div class="line">使用两个图片实现圆角图形</div>
<div class="line-block">
<div class="line">如下代码</div>
</div>
</div>
<pre class="literal-block">
UIImage \*background = [UIImage imageNamed:&#64;&quot;logo\_back&quot;];
UIImage \*front = [UIImage imageNamed:&#64;&quot;profile&quot;];

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGContextSetBlendMode(context, kCGBlendModeDarken);
CGRect size = CGRectMake(0.f, 0.f, background.size.width,background.size.height);
[background drawAtPoint:CGPointMake(0.f, 0.f)];
CGContextTranslateCTM(context, 0.f, background.size.height);
CGContextScaleCTM(context, 1.f, -1);
CGContextDrawImage(context, size, front.CGImage);
CGContextRestoreGState(context);
</pre>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Tue 05 March 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/03/05/iosxiang-mu-zhong-ctou-wen-jian-zhao-bu-dao-cuo-wu/" rel="bookmark" title="Permalink to ios项目中c++头文件找不到错误">
                        ios项目中c++头文件找不到错误
                    </a>
                </h2></header>

                   <div class="clearboth"><p>我们知道object-c与c++代码混合使用时，会将文件改为.mm的后缀。这个xcode在编译时就会使用clang和llvmg++来编译，一些标准备库文件就会正常识别。</p>
<div class="line-block">
<div class="line">但是出现了另外一问题。在.h的文件里面使用了c++的库文件时，却引起了not</div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/liyajie1209/coamee.com/myblog/content/ios_cplusplus_header.rst</tt>, line 10)</p>
Line block ends without a blank line.</div>
<p>found 编译错误。
|  解决办法如下：</p>
<pre class="literal-block">
#include
#ifdef __cplusplus
#include
#include
#include
#include
#include
#include
#endif

#ifdef __OBJC__
#warning import some object c header file
#endif
</pre>
</div>


            </div>
        </article>
        <article class="entry-overview">
            <div class="date">Mon 25 February 2013 by <a rel="author" href="http://xiangyuan.github.io/pages/aboutme.html">向远</a></div>
            <div class="detail">
                <header><h2>
                    <a href="http://xiangyuan.github.io/posts/2013/02/25/imageiojie-shao/" rel="bookmark" title="Permalink to ImageIO介绍">
                        ImageIO介绍
                    </a>
                </h2></header>

                   <div class="clearboth"><p>Image IO允许应用程序读写大部分图片文件格式。起初是作为Core Graphics
框架的一部分，后来独立出来，允许开发者操作图像数据且非常高效。读取图片属性，提供颜色管理。（此接口osx
v10.4 ios4.0）</p>
<div class="line-block">
<div class="line">Image I/O框架的特点：</div>
<div class="line-block">
<div class="line">1、mac平台最快的图像编码解码操作。</div>
<div class="line">2、渐增的图片加载方式。</div>
<div class="line">3、图片metadata信息的访问（ios不支持）。</div>
<div class="line">4、有效的缓存。</div>
</div>
</div>
<p>下面是访问图片的exif等信息的事例操作。当然还可以通过asset
library去操作。<a class="reference external" href="https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html">参考</a></p>
<p>通过io框架操作代码如下</p>
<pre class="literal-block">
//1.create the image source
    NSURL * imageURL = [[NSBundle mainBundle] URLForImageResource:&#64;&quot;test_img.JPG&quot;];

    CFDictionaryRef myOptions = NULL;

    CFStringRef myKeys[2];
    myKeys[0] = kCGImageSourceShouldCache;
    myKeys[1] = kCGImageSourceShouldAllowFloat;

    CFStringRef myValues[2];
    myValues[0] = (CFTypeRef)kCFBooleanTrue;
    myValues[1] = (CFTypeRef)kCFBooleanTrue;
//    NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:kCFBooleanTrue,kCGImageSourceShouldCache,kCFBooleanTrue,kCGImageSourceShouldAllowFloat, nil];

    myOptions = CFDictionaryCreate(NULL, (const void **)myKeys, (const void**)myValues, 2, &amp;kCFTypeDictionaryKeyCallBacks, &amp;kCFTypeDictionaryValueCallBacks);
    CGImageSourceRef imageSourceRef = CGImageSourceCreateWithURL((CFURLRef)imageURL, myOptions);
    CFRelease(myOptions);

    if (imageSourceRef == NULL) {
        NSLog(&#64;&quot;imagesource is NULL&quot;);
    } else {
        // read the image meta data
        CFDictionaryRef properties = CGImageSourceCopyPropertiesAtIndex(imageSourceRef, 0, NULL);
//        CFDictionaryRef properties = CGImageSourceCopyProperties(imageSourceRef, nil);
        NSDictionary * dictionary = (NSDictionary*)properties;
        [dictionary enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
            NSLog(&#64;&quot;key = %&#64; value = %&#64;&quot;,key,obj);
        }];

//        CGImageMetadataRef metaRef = CGImageSourceCopyMetadataAtIndex(imageSourceRef, 0, NULL);
//        CFArrayRef  metaTags = CGImageMetadataCopyTags(metaRef);
//        CFIndex len = CFArrayGetCount(metaTags);
//        for (int i = 0; i &lt; len; i ++) {
//            CGImageMetadataTagRef tagRef = (CGImageMetadataTagRef)CFArrayGetValueAtIndex(metaTags, i);
//            NSLog(&#64;&quot;tag name =&quot;,CGImageMetadataTagCopyName(tagRef),CGImageMetadataTagCopyValue(tagRef))
//        }
    }
</pre>
<p>结果如下</p>
<pre class="literal-block">
/*
 key = {TIFF} value = {
 DateTime = &quot;2012:09:23 11:33:51&quot;;
 ImageDescription = &quot;                               &quot;;
 Make = Canon;
 Model = &quot;Canon IXUS 220HS&quot;;
 Orientation = 1;
 ResolutionUnit = 2;
 XResolution = 180;
 YResolution = 180;
 }
 2013-02-25 17:31:22.261 ImageIODemo[2571:303] key = {Exif} value = {
 ApertureValue = &quot;2.875&quot;;
 ColorSpace = 1;
 ComponentsConfiguration =     (
 1,
 2,
 3,
 0
 );
 CompressedBitsPerPixel = 3;
 CustomRendered = 0;
 DateTimeDigitized = &quot;2012:09:23 11:33:51&quot;;
 DateTimeOriginal = &quot;2012:09:23 11:33:51&quot;;
 DigitalZoomRatio = 1;
 ExifVersion =     (
 2,
 3
 );
 ExposureBiasValue = 0;
 ExposureMode = 0;
 ExposureTime = &quot;0.04&quot;;
 FNumber = &quot;2.7&quot;;
 FileSource = 3;
 Flash = 16;
 FlashPixVersion =     (
 1,
 0
 );
 FocalLength = &quot;4.3&quot;;
 FocalPlaneResolutionUnit = 2;
 FocalPlaneXResolution = &quot;11540.98360655738&quot;;
 FocalPlaneYResolution = &quot;11540.98360655738&quot;;
 ISOSpeedRatings =     (
 800
 );
 MaxApertureValue = &quot;2.875&quot;;
 MeteringMode = 5;
 PixelXDimension = 2816;
 PixelYDimension = 2112;
 SceneCaptureType = 0;
 SensingMethod = 2;
 ShutterSpeedValue = &quot;4.65625&quot;;
 WhiteBalance = 0;
 }
 2013-02-25 17:31:22.261 ImageIODemo[2571:303] key = PixelWidth value = 2816
 2013-02-25 17:31:22.262 ImageIODemo[2571:303] key = PixelHeight value = 2112
 2013-02-25 17:31:22.262 ImageIODemo[2571:303] key = {IPTC} value = {
 &quot;Caption/Abstract&quot; = &quot;                               &quot;;
 StarRating = 0;
 }
 2013-02-25 17:31:22.262 ImageIODemo[2571:303] key = {MakerCanon} value = {
 ContinuousDrive = 0;
 ImageSerialNumber = 1785006;
 MaxAperture = &quot;2.708511093873785&quot;;
 MinAperture = 8;
 UniqueModelID = 50593792;
 WhiteBalanceIndex = 0;
 }
 2013-02-25 17:31:22.263 ImageIODemo[2571:303] key = ProfileName value = sRGB IEC61966-2.1
 2013-02-25 17:31:22.263 ImageIODemo[2571:303] key = {ExifAux} value = {
 AFInfo =     (
 &quot;0.23&quot;,
 &quot;0.23&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.41&quot;,
 &quot;0.23&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.59&quot;,
 &quot;0.23&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.23&quot;,
 &quot;0.41&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.41&quot;,
 &quot;0.41&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.59&quot;,
 &quot;0.41&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 f,
 &quot;0.23&quot;,
 &quot;0.59&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n,
 &quot;0.41&quot;,
 &quot;0.59&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 f,
 &quot;0.59&quot;,
 &quot;0.59&quot;,
 &quot;0.18&quot;,
 &quot;0.18&quot;,
 n
 );
 Firmware = &quot;Firmware Version 1.00&quot;;
 FlashCompensation = 0;
 FocusMode = 1;
 ImageStabilization = 3;
 LensInfo =     (
 &quot;4.3&quot;,
 &quot;21.5&quot;,
 0,
 0
 );
 LensModel = &quot;4.3-21.5 mm&quot;;
 }
 2013-02-25 17:31:22.264 ImageIODemo[2571:303] key = DPIWidth value = 180
 2013-02-25 17:31:22.264 ImageIODemo[2571:303] key = DPIHeight value = 180
 2013-02-25 17:31:22.265 ImageIODemo[2571:303] key = ColorModel value = RGB
 2013-02-25 17:31:22.265 ImageIODemo[2571:303] key = Orientation value = 1
 2013-02-25 17:31:22.265 ImageIODemo[2571:303] key = Depth value = 8
 */
</pre>
</div>


            </div>
        </article>
<p class="paginator">
    Page 1 / 5
        <a href="http://xiangyuan.github.io/author/xiang-yuan2.html">&raquo;</a>
</p>

          </section>
       </div>

       <div id="right-side" class="col-1-12">&nbsp;</div>
       <div id="right-side" class="col-3-12">

<div class="section-container">
   <h3>Blogroll</h3>
   <ul>
      <li><a href="http://getpelican.com/" target="_blank">Pelican <i class="fa fa-globe fa-fw"></i></a></li>
      <li><a href="http://python.org/" target="_blank">Python.org <i class="fa fa-globe fa-fw"></i></a></li>
      <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2 <i class="fa fa-globe fa-fw"></i></a></li>
      <li><a href="#" target="_blank">You can modify those links in your config file <i class="fa fa-globe fa-fw"></i></a></li>
   </ul>
</div>

<div class="section-container">
   <h3>Social Network</h3>
   <ul>
      <li>
        <a href="#" target="_blank">You can add links in your config file&nbsp;
           <i class="fa fa-globe fa-fw"></i>
        </a>
      </li>
      <li>
        <a href="#" target="_blank">Another social link&nbsp;
           <i class="fa fa-globe fa-fw"></i>
        </a>
      </li>
   </ul>
</div>

<div class="section-container">
   <h3>Categories</h3>
   <ul>
        <li><a href="http://xiangyuan.github.io/category/android.html">android <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/ios.html">ios <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/iosgong-ju.html">ios,工具 <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/iosopengles.html">ios,opengles <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/linux.html">linux <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/linux-c.html">linux c <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/mac.html">mac <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/macphp.html">mac,php <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/misc.html">misc <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/objc.html">objc <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/openglesios.html">opengles,ios <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/python.html">python <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/pythonios.html">python,ios <i class="fa fa-folder-open fa-fw"></i></a></li>
        <li><a href="http://xiangyuan.github.io/category/sui-sui-nian.html">碎碎念 <i class="fa fa-folder-open fa-fw"></i></a></li>
   </ul>
</div>

<div class="section-container">
   <h3>Tags</h3>
   <ul class="tagcloud">
        <li class="tag-4"><a href="http://xiangyuan.github.io/tag/qing-gan.html">#情感</a></li>
   </ul>
</div>

<div class="section-container">
   <h3>Feeds</h3>
   <ul>
      <li><a href="http://xiangyuan.github.io/feeds/index.xml" rel="alternate">atom feed <i class="fa fa-rss fa-fw"></i></a></li>
      <li><a href="http://xiangyuan.github.io/rss/index.xml" rel="alternate">rss feed <i class="fa fa-rss-square fa-fw"></i></a></li>
   </ul>
</div>

<div class="section-container">
   <h3>Archives</h3>
   <ul>
      <li><a href="http://xiangyuan.github.io/archives.html">All Archives</a></li>
    
            <li><a href="http://xiangyuan.github.io/posts/2013/06/index.html">June 2013</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2013/05/index.html">May 2013</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2013/04/index.html">April 2013</a></li>
      

      

      

      

            <li><a href="http://xiangyuan.github.io/posts/2013/03/index.html">March 2013</a></li>
      

      

      

            <li><a href="http://xiangyuan.github.io/posts/2013/02/index.html">February 2013</a></li>
      

      

            <li><a href="http://xiangyuan.github.io/posts/2013/01/index.html">January 2013</a></li>
      

      

      

            <li><a href="http://xiangyuan.github.io/posts/2012/12/index.html">December 2012</a></li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

            <li><a href="http://xiangyuan.github.io/posts/2012/11/index.html">November 2012</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2012/06/index.html">June 2012</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2012/05/index.html">May 2012</a></li>
      

      

      

            <li><a href="http://xiangyuan.github.io/posts/2012/02/index.html">February 2012</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2012/01/index.html">January 2012</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2011/11/index.html">November 2011</a></li>
      

      

            <li><a href="http://xiangyuan.github.io/posts/2011/10/index.html">October 2011</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2011/08/index.html">August 2011</a></li>
      

            <li><a href="http://xiangyuan.github.io/posts/2011/05/index.html">May 2011</a></li>
      

   </ul>
</div>

          <div class="section-container" id="copyright">
             <p>This Blog generated by <a href="http://getpelican.com/">Pelican</a> using <a href="https://github.com/habibillah/pujangga">Pujangga</a> theme. All content on this blog, unless stated otherwise, is licensed under the <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 International license</a>.</p>
          </div>
       </div>
    </div>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', '']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
 

    <script type="text/javascript" src="http://xiangyuan.github.io/theme/js/hyphenator.js"></script>
    <script type="text/javascript">
      Hyphenator.config({
          donthyphenateclassname: 'docutils',
          useCSS3hyphenation: true
      });
      Hyphenator.run();
    </script>

</body>

</html>